*** ./psl_fpga.tcl	2016-07-29 10:30:28.000000002 +0200
--- ./psl_fpga.tcl	2016-10-24 13:22:32.000000002 +0200
***************
*** 53,58 ****
--- 53,60 ----
  set xdcDir     "$srcDir/xdc"
  set coreDir    "$srcDir/cores"
  set netlistDir "$srcDir/netlist"
+ set rootDir    $::env(DONUT_HARDWARE_ROOT)
+ set dimmDir    $::env(DIMMTEST)
  
  ####Source required Tcl Procs
  source $tclDir/design_utils.tcl
***************
*** 70,84 ****
  set_attribute module $top    synth         ${run.topSynth}
  set_attribute module $top    synth_options "-flatten_hierarchy rebuilt -fanout_limit 400 -fsm_extraction one_hot -keep_equivalent_registers -resource_sharing off -no_lc -shreg_min_size 5 -no_iobuf"
  
  add_implementation $top
  set_attribute impl $top      top           $top
- set_attribute impl $top      linkXDC       [list $xdcDir/b_xilinx_capi_pcie_gen3_alphadata_brd_topimp.xdc] 
  set_attribute impl $top      impl          ${run.topImpl}
  set_attribute impl $top      hd.impl       1
! set_attribute impl $top      opt_directive Explore
! set_attribute impl $top      place_directive Explore
! set_attribute impl $top      phys_directive Explore
! set_attribute impl $top      route_directive Explore
  set_attribute impl $top      place.pre     [list pre_place.tcl             \
                                             ]
  set_attribute impl $top      bitstream     1
--- 72,119 ----
  set_attribute module $top    synth         ${run.topSynth}
  set_attribute module $top    synth_options "-flatten_hierarchy rebuilt -fanout_limit 400 -fsm_extraction one_hot -keep_equivalent_registers -resource_sharing off -no_lc -shreg_min_size 5 -no_iobuf"
  
+ set_attribute module $top ip           [list \
+ 					   $rootDir/ip/ram_576to144x64_2p/ram_576to144x64_2p.xci                                                            \
+ 					   $rootDir/ip/ram_160to640x256_2p/ram_160to640x256_2p.xci                                                          \
+ 					   $rootDir/ip/fifo_129x512/fifo_129x512.xci                                                                        \
+ 					   $rootDir/ip/block_RAM/block_RAM.xci                                                                              \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_memcopy_0_0/action_memcopy_0_0.xci                           \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_opencldesign_wrapper_0_0/action_opencldesign_wrapper_0_0.xci \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_clk_wiz_0_0/action_clk_wiz_0_0.xci				  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_proc_sys_reset_0_0/action_proc_sys_reset_0_0.xci		  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_axi_interconnect_0_0/action_axi_interconnect_0_0.xci	  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_xbar_0/action_xbar_0.xci					  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_s00_regslice_0/action_s00_regslice_0.xci			  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_m00_regslice_0/action_m00_regslice_0.xci			  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_m01_regslice_0/action_m01_regslice_0.xci			  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_axi_interconnect_1_0/action_axi_interconnect_1_0.xci	  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_xbar_1/action_xbar_1.xci					  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_s00_regslice_1/action_s00_regslice_1.xci			  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_s01_regslice_0/action_s01_regslice_0.xci			  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_m00_regslice_1/action_m00_regslice_1.xci			  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_axi_interconnect_2_0/action_axi_interconnect_2_0.xci	  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_axi_register_slice_0_0/action_axi_register_slice_0_0.xci	  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_auto_cc_0/action_auto_cc_0.xci				  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_auto_cc_1/action_auto_cc_1.xci				  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_auto_cc_2/action_auto_cc_2.xci				  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_auto_ds_0/action_auto_ds_0.xci				  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_auto_us_0/action_auto_us_0.xci				  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_auto_rs_w_0/action_auto_rs_w_0.xci				  \
+                                            $rootDir/action/action.srcs/sources_1/bd/action/ip/action_auto_cc_3/action_auto_cc_3.xci				  \
+ 					   ]
+ 
  add_implementation $top
+ set_attribute impl $top      linkXDC       [list \
+                                             $rootDir/setup/donut.xdc \
+ 					    ]
  set_attribute impl $top      top           $top
  set_attribute impl $top      impl          ${run.topImpl}
+ #set_attribute impl $top      phys_options  "-force_replication_on_nets [get_nets -hierarchical -top_net_of_hierarchical_group -filter { NAME =~  "*action_reset*" } ]"
  set_attribute impl $top      hd.impl       1
! #set_attribute impl $top      opt_directive Explore
! #set_attribute impl $top      place_directive Explore
! set_attribute impl $top      phys_directive AggressiveExplore
! #set_attribute impl $top      route_directive Explore
  set_attribute impl $top      place.pre     [list pre_place.tcl             \
                                             ]
  set_attribute impl $top      bitstream     1
